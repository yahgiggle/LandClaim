package landclaim;

import net.risingworld.api.events.EventMethod;
import net.risingworld.api.objects.Player;
import java.sql.SQLException;
import net.risingworld.api.events.player.ui.PlayerUIElementClickEvent;
import net.risingworld.api.ui.UIElement;
import net.risingworld.api.ui.UILabel;

public class AdminOnClickButtons extends LandClaim{
    private final LandClaim plugin;
    private final AdminTools adminTools;

    public AdminOnClickButtons(LandClaim plugin, AdminTools adminTools) {
        this.plugin = plugin;
        this.adminTools = adminTools;
    }

    @EventMethod
    public void onPlayerUIElementClick(PlayerUIElementClickEvent event) throws SQLException {
          
    Player player = event.getPlayer();
    UILabel element = (UILabel) event.getUIElement();
    UILabel FeedBackinfoPanel = (UILabel)player.getAttribute("FeedBackinfoPanel");
    
    
    
    if (element != null && element.getText().equals("<b>Admin Tools</b>")) {
        AdminUIMenu adminMenu = new AdminUIMenu(this, adminTools); // Re-use existing menu
        adminMenu.showAdminToolsPopup(player);
        player.setMouseCursorVisible(true);
    } else if (element != null && element.getText().equals("<b>X</b>")) {
        
        element.setVisible(false); // Hide the clicked element (popup or button)
        UIElement ThisParent = element.getParent();
        ThisParent.setVisible(false);
        
        player.setMouseCursorVisible(false);
    } else if (element != null && element.getText().equals("<b>Migrate old WP Database</b>")) {
        adminTools.migrateDatabase(player);
      //  FeedBackinfoPanel.setText("Database migration triggered!");
      //  player.sendTextMessage("Button Test 1");
    }
         
    }
    
         
   
}
